{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./src/pages/guides/DB2OnCloudSetup.md"],"names":["children","title","tabs","shouldHideHeader","className","cx","id","text","relativePagePath","repositoryProp","repository","baseUrl","href","row","render","this","slug","currentTab","pageTabs","tab","slugifiedTab","slugify","lower","selected","key","to","tabsContainer","list","React","Component","pageContext","location","frontmatter","scrollDirection","useScrollDirection","pathPrefix","homepage","label","padded","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-guides-db-2-on-cloud-setup-md-965d7f2c23409a22c5c4.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport {\n  pageHeader,\n  text,\n  pageHeaderSticky,\n  pageHeaderShifted,\n} from './PageHeader.module.scss';\n\nconst PageHeader = ({ children, title, tabs = [], shouldHideHeader }) => (\n  <div\n    className={cx({\n      [pageHeader]: pageHeader,\n      [pageHeaderSticky]: tabs.length,\n      [pageHeaderShifted]: shouldHideHeader,\n    })}\n  >\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n    {children}\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Pass in the children that will be rendered within the PageHeader\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.string,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory } = repositoryProp || repository;\n\n  const href = `${baseUrl}/tree/master${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  static propTypes = {\n    tabs: PropTypes.array,\n    slug: PropTypes.string,\n  };\n\n  render() {\n    const { tabs, slug } = this.props;\n    const currentTab = slug\n      .split('/')\n      .filter(Boolean)\n      .slice(-1)[0];\n\n    const pageTabs = tabs.map(tab => {\n      const slugifiedTab = slugify(tab, { lower: true });\n      const selected = slugifiedTab === currentTab;\n      const href = slug.replace(currentTab, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { WebsiteBackToTopBtn } from '@carbon/addons-website';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport { useScrollDirection } from '../util/hooks';\n\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\n\nconst Default = ({ pageContext, children, location }) => {\n  const { frontmatter = {}, relativePagePath } = pageContext;\n  const { tabs, title } = frontmatter;\n  const scrollDirection = useScrollDirection();\n  const shouldHideHeader = !!tabs && scrollDirection === 'down';\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return slug.split('/').slice(-1)[0] || slugify(tabs[0], { lower: true });\n  };\n\n  const currentTab = getCurrentTab();\n  return (\n    <Layout shouldHideHeader={shouldHideHeader} homepage={false}>\n      <PageHeader\n        shouldHideHeader={shouldHideHeader}\n        title={title}\n        label=\"label\"\n        tabs={tabs}\n      >\n        {tabs && <PageTabs slug={slug} tabs={tabs} currentTab={currentTab} />}\n      </PageHeader>\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <WebsiteBackToTopBtn />\n    </Layout>\n  );\n};\n\nexport default Default;\n","import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/FHIR/fhir/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2 {...{\n      \"id\": \"using-db2-for-persistence\"\n    }}>{`Using DB2 For Persistence`}</h2>\n    <h3 {...{\n      \"id\": \"create-a-db2-instance\"\n    }}>{`Create a DB2 Instance`}</h3>\n    <p>{`Log in to your IBM Cloud account `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/\"\n      }}>{`https://cloud.ibm.com/`}</a>{`.`}</p>\n    <p>{`Click `}<inlineCode parentName=\"p\">{`Create resource`}</inlineCode>{`.`}</p>\n    <p>{`Choose DB2 (transactional).`}</p>\n    <p>{`Select the instance size. Flex is the best choice for a basic production workload.`}</p>\n    <p>{`You can use the Lite plan for development or evaluation workloads. This plan has a limit of 5 concurrent connections, so the FHIR server connection-pool will need to be sized accordingly to avoid failures.`}</p>\n    <h3 {...{\n      \"id\": \"scale-the-instance\"\n    }}>{`Scale the Instance`}</h3>\n    <p>{`If you chose Flex, you may want to scale the instance after it has been created (e.g. 4 cores, 16GB). The instance can be scaled more than once, so it doesn’t matter if you don’t get the sizing right first time. Scaling the instance requires a reboot.`}</p>\n    <h3 {...{\n      \"id\": \"create-the-administrator-credential\"\n    }}>{`Create the Administrator Credential`}</h3>\n    <p>{`The administrator will be BLUADMIN but you need to create a credential. Open the `}<inlineCode parentName=\"p\">{`Service credentials`}</inlineCode>{` panel for the DB2 instance resource you just created. If you don’t yet have any service credentials in the table at the bottom of the page, create a new one by clicking the `}<inlineCode parentName=\"p\">{`New credential (+)`}</inlineCode>{` button. Any name will do.`}</p>\n    <p>{`To access the credential, select View Credentials for the entry you just created. The result will be a block of JSON full of secrets (blanked out here):`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`{\n  \"hostname\": \"dashdb-txn-flex-.***********.services.dal.bluemix.net\",\n  \"password\": \"bluadmin-password-very-secret\",\n  \"https_url\": \"https://dashdb-txn-flex-************.services.dal.bluemix.net:8443\",\n  \"port\": 50000,\n  \"ssldsn\": \"DATABASE=BLUDB;HOSTNAME=dashdb-txn-flex-************.services.dal.bluemix.net;PORT=50001;PROTOCOL=TCPIP;UID=bluadmin;PWD=bluadmin-password-very-secret;Security=SSL;\",\n  \"host\": \"dashdb-txn-flex-************.services.dal.bluemix.net\",\n  \"jdbcurl\": \"jdbc:db2://dashdb-txn-flex-************.services.dal.bluemix.net:50000/BLUDB\",\n  \"uri\": \"db2://bluadmin:bluadmin-password-very-secret@dashdb-txn-flex-************.services.dal.bluemix.net:50000/BLUDB\",\n  \"db\": \"BLUDB\",\n  \"dsn\": \"DATABASE=BLUDB;HOSTNAME=dashdb-txn-flex-************.services.dal.bluemix.net;PORT=50000;PROTOCOL=TCPIP;UID=bluadmin;PWD=bluadmin-password-very-secret;\",\n  \"username\": \"bluadmin\",\n  \"ssljdbcurl\": \"jdbc:db2://dashdb-txn-flex-************.services.dal.bluemix.net:50001/BLUDB:sslConnection=true;\"\n}\n`}</code></pre>\n    <p>{`These properties will be needed to deploy and manage the FHIR schema.`}</p>\n    <h3 {...{\n      \"id\": \"fhirserver-user-and-api-key\"\n    }}>{`FHIRSERVER User and API Key`}</h3>\n    <p>{`The BLUADMIN user is used to deploy the initial schema objects (tables, indexes, stored procedures etc). Following the least-privilege principle, the FHIR server itself does not use BLUADMIN. The FHIR server uses an API Key associated with an IAM Service Id. This Service Id is mapped to a DB2 user which is granted explicit privileges to the tables and stored procedures.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`    API KEY -------> Service Id -------> DB2 User ------> SELECT/UPDATE/EXECUTE etc Privileges\n (FHIR Config)          (IAM)              (DB2)                          (DB2)\n`}</code></pre>\n    <p>{`On the IBM Cloud console, select Manage / Access (IAM).`}</p>\n    <p>{`Select the Service IDs panel: `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/iam/serviceids\"\n      }}>{`https://cloud.ibm.com/iam/serviceids`}</a>{`.`}</p>\n    <p>{`Wait for the table to populate. If you do not yet have an appropriate service id, click `}<inlineCode parentName=\"p\">{`Create (+)`}</inlineCode></p>\n    <p>{`Specify a meaningful name and description. After creating the Service ID, record the ID value which will start with `}<inlineCode parentName=\"p\">{`ServiceId-...`}</inlineCode>{`.`}</p>\n    <p>{`Select the API keys tab on the Service ID management page. Note that this is not the `}<inlineCode parentName=\"p\">{`IBM Cloud API keys`}</inlineCode>{` on the left.`}</p>\n    <p>{`Select Create (+) to add a new API key. Copy or download the key. If you mess up and don’t retain a copy, don’t panic - you can simply delete the API key and create a new one. API keys are designed to support rolling so you can add as many as you need and delete others if you need to revoke access for any reason.`}</p>\n    <p>{`The API key will be used in the database configuration section of the fhir-server-config.json file.`}</p>\n    <p>{`Before the API key can be used, we need to create a DB2 user and associate it with the new ServiceId.`}</p>\n    <p>{`Navigate to the IBM Cloud DB2 resource page for your instance and select Manage. Click Open Console to access the IBM Db2 on Cloud console.`}</p>\n    <p>{`Select SETTINGS > Manage Users.`}</p>\n    <p>{`Click Add. This opens a panel on the right-hand side.`}</p>\n    <p>{`Select Add IBMid User at the top.`}</p>\n    <p>{`User ID: FHIRSERVER\nIBMid: paste the ServiceId-… value from the Service Id created previously.`}</p>\n    <p>{`The page forces the value to lower-case, so `}<inlineCode parentName=\"p\">{`ServiceId`}</inlineCode>{` becomes `}<inlineCode parentName=\"p\">{`serviceid`}</inlineCode>{`. Don’t be alarmed, it still works.`}</p>\n    <p>{`Do NOT select Administrator. We want the FHIRSERVER user to be a plain user with minimal privileges.`}</p>\n    <p>{`Click Create.`}</p>\n    <p>{`You should now be able to connect to the database as the FHIRSERVER user using only the API key created above.`}</p>\n    <h3 {...{\n      \"id\": \"testing-the-connection\"\n    }}>{`Testing the Connection`}</h3>\n    <p>{`The DB2 driver jar contains a main which can be executed to test the connection - very convenient for checking the API-key/Service-Id/DB2-User-Id configuration is correct.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`java -cp /path/to/db2jcc4.jar com.ibm.db2.jcc.DB2Jcc  -url \"jdbc:db2://<DB2-HOSTNAME>:50001/BLUDB:apiKey=<API-KEY>;securityMechanism=15;sslConnection=true;sslTrustStoreLocation=/path/to/truststore.jks;sslTrustStorePassword=<TRUSTSTORE-PASSWORD>;\"\n\n\n        <DB-HOSTNAME>: the hostname of your DB2 service from the Service Credentials page\n            <API-KEY>: the API key value created in the previous section\n<TRUSTSTORE-PASSWORD>: the password for your truststore\n`}</code></pre>\n    <p>{`Notes:\n1. Don’t forget the trailing `}<inlineCode parentName=\"p\">{`;`}</inlineCode>{` in the URL. Some of the documented examples don’t include it, but it is required in order for the connection to work, although this may be fixed in a future driver release. This only affects this test URL, not the actual FHIR server configuration.\n2. When using an API Key, no username needs to be provided. This is because the API Key maps to a ServiceId, and that ServiceId is mapped to the DB2 user.`}</p>\n    <h3 {...{\n      \"id\": \"configuring-a-liberty-datasource-with-api-key\"\n    }}>{`Configuring a Liberty Datasource with API Key`}</h3>\n    <p>{`The FHIR export feature utilizes Java Batch (JSR-352) provided by the batch-1.0 feature in Liberty Profile. The JPA persistence layer can be configured to use DB2 as follows:`}</p>\n    <p>{`Create a DB2 user (e.g. FHIRBATCH) and associate it with a ServiceId (no need to create an Administration user, a simple user has sufficient privileges). Using a valid API-KEY for the given ServiceId, configure a new datasource and the Java Batch persistence layer as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`    <dataSource id=\"fhirbatchDS\" jndiName=\"jdbc/fhirbatchDB\">\n        <jdbcDriver libraryRef=\"fhirSharedLib\"/>\n        <properties.db2.jcc\n            serverName=\"dashdb-txn-flex-************.services.dal.bluemix.net\"\n            portNumber=\"50001\"\n            apiKey=\"<API-KEY>\"\n            securityMechanism=\"15\"\n            pluginName=\"IBMIAMauth\"\n            databaseName=\"BLUDB\"\n            currentSchema=\"JBATCH\"\n            driverType=\"4\" sslConnection=\"true\" sslTrustStoreLocation=\"resources/security/dbTruststore.jks\" sslTrustStorePassword=\"<TRUSTSTORE-PASSWORD>\"/>\n    </dataSource>\n    \n    <batchPersistence jobStoreRef=\"BatchDatabaseStore\" />\n    <databaseStore id=\"BatchDatabaseStore\" dataSourceRef=\"fhirbatchDS\" schema=\"JBATCH\" tablePrefix=\"\" />\n`}</code></pre>\n    <h3 {...{\n      \"id\": \"configuring-fhir-datasource\"\n    }}>{`Configuring FHIR Datasource`}</h3>\n    <p>{`The FHIR server uses a proxy datasource mechanism, allowing new datasources to be added at runtime without requiring a (Liberty Profile) server restart. To configure a FHIR tenant datasource using an API-KEY, use the following template:`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`        \"persistence\": {\n            \"datasources\": {\n                \"default\": {\n                    \"tenantKey\": \"\",\n                    \"type\": \"db2\",\n                    \"connectionProperties\": {\n                        \"serverName\": \"dashdb-txn-flex-************.services.dal.bluemix.net\",\n                        \"portNumber\": 50001,\n                        \"databaseName\": \"BLUDB\",\n                        \"apiKey\": \"<API-KEY>\",\n                        \"securityMechanism\": 15,\n                        \"pluginName\": \"IBMIAMauth\",\n                        \"currentSchema\": \"FHIRDATA\",\n                        \"driverType\": 4,\n                        \"sslConnection\": true,\n                        \"sslTrustStoreLocation\": \"resources/security/dbTruststore.jks\",\n                        \"sslTrustStorePassword\": \"change-password\"\n                    }\n                }\n            }\n        }\n`}</code></pre>\n    <p>{`Note that no username properties are given, because the authentication module only requires the API-KEY.`}</p>\n    <h3 {...{\n      \"id\": \"ssl-certificate\"\n    }}>{`SSL Certificate`}</h3>\n    <p>{`The DB2 certificate should be added to the Liberty Profile truststore. `}<em parentName=\"p\">{`Be sure to use the same Java runtime that Liberty Profile uses when manipulating any keystores.`}</em></p>\n    <h3 {...{\n      \"id\": \"encrypt-secrets\"\n    }}>{`Encrypt Secrets`}</h3>\n    <p>{`All passwords including apiKey values should be encrypted using the Liberty Profile securityUtility.`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}