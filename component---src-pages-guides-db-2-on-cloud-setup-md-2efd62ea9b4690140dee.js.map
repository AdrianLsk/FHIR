{"version":3,"sources":["webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/index.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.js","webpack:///./node_modules/gatsby-theme-carbon/src/templates/Default.js","webpack:///./node_modules/gatsby-theme-carbon/src/components/EditLink/EditLink.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageTabs/PageTabs.module.scss","webpack:///./node_modules/gatsby-theme-carbon/src/components/PageHeader/PageHeader.module.scss","webpack:///./src/pages/guides/DB2OnCloudSetup.md"],"names":["children","title","tabs","shouldHideHeader","className","cx","id","text","relativePagePath","repositoryProp","repository","baseUrl","href","row","render","this","slug","currentTab","pageTabs","tab","slugifiedTab","slugify","lower","selected","key","to","tabsContainer","list","React","Component","pageContext","location","frontmatter","scrollDirection","useScrollDirection","pathPrefix","homepage","label","padded","module","exports","_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---src-pages-guides-db-2-on-cloud-setup-md-2efd62ea9b4690140dee.js","sourcesContent":["import PageHeader from './PageHeader';\n\nexport default PageHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport cx from 'classnames';\nimport {\n  pageHeader,\n  text,\n  pageHeaderSticky,\n  pageHeaderShifted,\n} from './PageHeader.module.scss';\n\nconst PageHeader = ({ children, title, tabs = [], shouldHideHeader }) => (\n  <div\n    className={cx({\n      [pageHeader]: pageHeader,\n      [pageHeaderSticky]: tabs.length,\n      [pageHeaderShifted]: shouldHideHeader,\n    })}\n  >\n    <div className=\"bx--grid\">\n      <div className=\"bx--row\">\n        <div className=\"bx--col-lg-12\">\n          <h1 id=\"page-title\" className={text}>\n            {title}\n          </h1>\n        </div>\n      </div>\n    </div>\n    {children}\n  </div>\n);\n\nPageHeader.propTypes = {\n  /**\n   * Pass in the children that will be rendered within the PageHeader\n   */\n  children: PropTypes.node,\n\n  /**\n   * Specify the title for the page\n   */\n  title: PropTypes.string,\n};\n\nexport default PageHeader;\n","import EditLink from './EditLink';\n\nexport default EditLink;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { graphql, useStaticQuery } from 'gatsby';\n\nimport { link, row } from './EditLink.module.scss';\n\nconst EditLink = ({ relativePagePath, repository: repositoryProp }) => {\n  const {\n    site: {\n      siteMetadata: { repository },\n    },\n  } = useStaticQuery(graphql`\n    query REPOSITORY_QUERY {\n      site {\n        siteMetadata {\n          repository {\n            baseUrl\n            subDirectory\n          }\n        }\n      }\n    }\n  `);\n\n  const { baseUrl, subDirectory } = repositoryProp || repository;\n\n  const href = `${baseUrl}/tree/master${subDirectory}/src/pages${relativePagePath}`;\n\n  return baseUrl ? (\n    <div className={`bx--row ${row}`}>\n      <div className=\"bx--col\">\n        <a className={link} href={href}>\n          Edit this page on GitHub\n        </a>\n      </div>\n    </div>\n  ) : null;\n};\n\nEditLink.propTypes = {\n  repository: PropTypes.shape({\n    baseUrl: PropTypes.string,\n    subDirectory: PropTypes.string,\n  }),\n  relativePagePath: PropTypes.string,\n};\n\nexport default EditLink;\n","import PageTabs from './PageTabs';\n\nexport default PageTabs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Link } from 'gatsby';\nimport slugify from 'slugify';\nimport cx from 'classnames';\n\nimport {\n  tabsContainer,\n  list,\n  selectedItem,\n  listItem,\n  link,\n} from './PageTabs.module.scss';\n\nexport default class PageTabs extends React.Component {\n  static propTypes = {\n    tabs: PropTypes.array,\n    slug: PropTypes.string,\n  };\n\n  render() {\n    const { tabs, slug } = this.props;\n    const currentTab = slug\n      .split('/')\n      .filter(Boolean)\n      .slice(-1)[0];\n\n    const pageTabs = tabs.map(tab => {\n      const slugifiedTab = slugify(tab, { lower: true });\n      const selected = slugifiedTab === currentTab;\n      const href = slug.replace(currentTab, slugifiedTab);\n      return (\n        <li key={tab} className={cx({ [selectedItem]: selected }, listItem)}>\n          <Link className={link} to={`${href}`}>\n            {tab}\n          </Link>\n        </li>\n      );\n    });\n\n    return (\n      <div className={tabsContainer}>\n        <div className=\"bx--grid\">\n          <div className=\"bx--row\">\n            <div className=\"bx--col-lg-12 bx--col-no-gutter\">\n              <nav>\n                <ul className={list}>{pageTabs}</ul>\n              </nav>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { WebsiteBackToTopBtn } from '@carbon/addons-website';\nimport slugify from 'slugify';\nimport { useStaticQuery, graphql } from 'gatsby';\n\nimport { useScrollDirection } from '../util/hooks';\n\nimport Layout from '../components/Layout';\nimport PageHeader from '../components/PageHeader';\nimport EditLink from '../components/EditLink';\nimport NextPrevious from '../components/NextPrevious';\nimport PageTabs from '../components/PageTabs';\nimport Main from '../components/Main';\n\nconst Default = ({ pageContext, children, location }) => {\n  const { frontmatter = {}, relativePagePath } = pageContext;\n  const { tabs, title } = frontmatter;\n  const scrollDirection = useScrollDirection();\n  const shouldHideHeader = !!tabs && scrollDirection === 'down';\n\n  // get the path prefix if it exists\n  const {\n    site: { pathPrefix },\n  } = useStaticQuery(graphql`\n    query PATH_PREFIX_QUERY {\n      site {\n        pathPrefix\n      }\n    }\n  `);\n\n  // let gatsby handle prefixing\n  const slug = pathPrefix\n    ? location.pathname.replace(pathPrefix, '')\n    : location.pathname;\n\n  const getCurrentTab = () => {\n    if (!tabs) return '';\n    return slug.split('/').slice(-1)[0] || slugify(tabs[0], { lower: true });\n  };\n\n  const currentTab = getCurrentTab();\n  return (\n    <Layout shouldHideHeader={shouldHideHeader} homepage={false}>\n      <PageHeader\n        shouldHideHeader={shouldHideHeader}\n        title={title}\n        label=\"label\"\n        tabs={tabs}\n      >\n        {tabs && <PageTabs slug={slug} tabs={tabs} currentTab={currentTab} />}\n      </PageHeader>\n      <Main padded>\n        {children}\n        <EditLink relativePagePath={relativePagePath} />\n      </Main>\n      <NextPrevious\n        pageContext={pageContext}\n        location={location}\n        slug={slug}\n        tabs={tabs}\n        currentTab={currentTab}\n      />\n      <WebsiteBackToTopBtn />\n    </Layout>\n  );\n};\n\nexport default Default;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"EditLink-module--bx--text-truncate--end--2pqje\",\"bxTextTruncateFront\":\"EditLink-module--bx--text-truncate--front--3_lIE\",\"link\":\"EditLink-module--link--1qzW3\",\"row\":\"EditLink-module--row--1B9Gk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageTabs-module--bx--text-truncate--end--267NA\",\"bxTextTruncateFront\":\"PageTabs-module--bx--text-truncate--front--3xEQF\",\"tabsContainer\":\"PageTabs-module--tabs-container--8N4k0\",\"list\":\"PageTabs-module--list--3eFQc\",\"listItem\":\"PageTabs-module--list-item--nUmtD\",\"link\":\"PageTabs-module--link--1mDJ1\",\"selectedItem\":\"PageTabs-module--selected-item--YPVr3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"bxTextTruncateEnd\":\"PageHeader-module--bx--text-truncate--end--mZWeX\",\"bxTextTruncateFront\":\"PageHeader-module--bx--text-truncate--front--3zvrI\",\"pageHeader\":\"PageHeader-module--page-header--3hIan\",\"text\":\"PageHeader-module--text--o9LFq\",\"pageHeaderSticky\":\"PageHeader-module--page-header--sticky--1ElAE\",\"pageHeaderShifted\":\"PageHeader-module--page-header--shifted--1sRXO\"};","import React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/FHIR/FHIR/fhir/docs/node_modules/gatsby-theme-carbon/src/templates/Default.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h2 {...{\n      \"id\": \"using-db2-for-persistence\"\n    }}>{`Using Db2 for persistence`}</h2>\n    <p>{`This document walks a developer or administrator through the steps necessary to setup and configure IBM Db2 on IBM Cloud for the IBM FHIR Server.`}</p>\n    <h3 {...{\n      \"id\": \"create-a-db2-instance\"\n    }}>{`Create a Db2 instance`}</h3>\n    <p>{`Log in to your IBM Cloud account `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/\"\n      }}>{`https://cloud.ibm.com/`}</a>{`.`}</p>\n    <p>{`Click `}<inlineCode parentName=\"p\">{`Create resource`}</inlineCode>{`.`}</p>\n    <p>{`Choose `}<inlineCode parentName=\"p\">{`Db2 (transactional)`}</inlineCode>{`.`}</p>\n    <p>{`Select the instance size. Flex is the best choice for a basic production workload.`}</p>\n    <p>{`You can use the Lite plan for development or evaluation workloads. This plan has a limit of 5 concurrent connections; the IBM FHIR server connection-pool needs to be sized accordingly to avoid failures.`}</p>\n    <h3 {...{\n      \"id\": \"scale-the-instance\"\n    }}>{`Scale the Instance`}</h3>\n    <p>{`If you chose Flex, you may want to scale the instance after it has been created (e.g. 4 cores, 16GB). The instance can be scaled more than once, so it doesn’t matter if you don’t get the sizing right first time. Scaling the instance requires a service restart.`}</p>\n    <h3 {...{\n      \"id\": \"create-the-administrator-credential\"\n    }}>{`Create the Administrator Credential`}</h3>\n    <p>{`The administrator will be BLUADMIN but you need to create a credential. Open the `}<inlineCode parentName=\"p\">{`Service credentials`}</inlineCode>{` panel for the Db2 instance resource you just created. If you don’t yet have any service credentials in the table at the bottom of the page, create a new one by clicking the `}<inlineCode parentName=\"p\">{`New credential (+)`}</inlineCode>{` button. Any name will do.`}</p>\n    <p>{`To access the credential, select View Credentials for the entry you just created. The result will be a block of JSON full of secrets (blanked out here):`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`{\n  \"hostname\": \"dashdb-txn-flex-.***********.services.dal.bluemix.net\",\n  \"password\": \"bluadmin-password-very-secret\",\n  \"https_url\": \"https://dashdb-txn-flex-************.services.dal.bluemix.net:8443\",\n  \"port\": 50000,\n  \"ssldsn\": \"DATABASE=BLUDB;HOSTNAME=dashdb-txn-flex-************.services.dal.bluemix.net;PORT=50001;PROTOCOL=TCPIP;UID=bluadmin;PWD=bluadmin-password-very-secret;Security=SSL;\",\n  \"host\": \"dashdb-txn-flex-************.services.dal.bluemix.net\",\n  \"jdbcurl\": \"jdbc:db2://dashdb-txn-flex-************.services.dal.bluemix.net:50000/BLUDB\",\n  \"uri\": \"db2://bluadmin:bluadmin-password-very-secret@dashdb-txn-flex-************.services.dal.bluemix.net:50000/BLUDB\",\n  \"db\": \"BLUDB\",\n  \"dsn\": \"DATABASE=BLUDB;HOSTNAME=dashdb-txn-flex-************.services.dal.bluemix.net;PORT=50000;PROTOCOL=TCPIP;UID=bluadmin;PWD=bluadmin-password-very-secret;\",\n  \"username\": \"bluadmin\",\n  \"ssljdbcurl\": \"jdbc:db2://dashdb-txn-flex-************.services.dal.bluemix.net:50001/BLUDB:sslConnection=true;\"\n}\n`}</code></pre>\n    <p>{`These properties are needed to deploy and manage the IBM FHIR Server schema.`}</p>\n    <h3 {...{\n      \"id\": \"fhirserver-user-and-api-key\"\n    }}>{`FHIRSERVER User and API Key`}</h3>\n    <p>{`The `}<strong parentName=\"p\">{`BLUADMIN`}</strong>{` user is used to deploy the initial schema objects (tables, indexes, stored procedures etc). Following the least-privilege principle, the FHIR server itself does not use `}<strong parentName=\"p\">{`BLUADMIN`}</strong>{`. The FHIR server uses an API Key associated with an IAM Service Id. This Service Id is mapped to a Db2 user which is granted explicit privileges to the tables and stored procedures.`}</p>\n    <pre><code parentName=\"pre\" {...{}}>{`    API KEY -------> Service Id -------> DB2 User ------> SELECT/UPDATE/EXECUTE etc Privileges\n (FHIR Config)          (IAM)              (DB2)                          (DB2)\n`}</code></pre>\n    <p>{`On the IBM Cloud console, select Manage / Access (IAM).`}</p>\n    <p>{`Select the `}<a parentName=\"p\" {...{\n        \"href\": \"https://cloud.ibm.com/iam/serviceids\"\n      }}>{`Service IDs panel`}</a>{`.`}</p>\n    <p>{`Wait for the table to populate. If you do not yet have an appropriate service id, click `}<inlineCode parentName=\"p\">{`Create (+)`}</inlineCode></p>\n    <p>{`Specify a meaningful name and description. After creating the Service ID, record the ID value which will start with `}<inlineCode parentName=\"p\">{`ServiceId-...`}</inlineCode>{`.`}</p>\n    <p>{`Select the API keys tab on the Service ID management page. Note that this is not the `}<inlineCode parentName=\"p\">{`IBM Cloud API keys`}</inlineCode>{` on the left.`}</p>\n    <p>{`Select `}<inlineCode parentName=\"p\">{`Create (+)`}</inlineCode>{` to add a new API key. Copy or download the key. If you mess up and don’t retain a copy, don’t panic - you can simply delete the API key and create a new one. API keys are designed to support rolling so you can add as many as you need and delete others if you need to revoke access for any reason.`}</p>\n    <p>{`The API key is used in the database configuration section of the `}<inlineCode parentName=\"p\">{`fhir-server-config.json`}</inlineCode>{` file.`}</p>\n    <p>{`Before the API key can be used, we need to create a Db2 user and associate it with the new ServiceId.`}</p>\n    <p>{`Navigate to the IBM Cloud Db2 resource page for your instance and select Manage. Click Open Console to access the IBM Db2 on Cloud console.`}</p>\n    <p>{`Select SETTINGS > Manage Users.`}</p>\n    <p>{`Click Add. This opens a panel on the right-hand side.`}</p>\n    <p>{`Select Add IBMid User at the top.`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`User ID: FHIRSERVER`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\">{`IBMid: paste the ServiceId-… value from the Service Id created previously.`}</p>\n      </li>\n    </ul>\n    <p>{`The page forces the value to lower-case, so `}<inlineCode parentName=\"p\">{`ServiceId`}</inlineCode>{` becomes `}<inlineCode parentName=\"p\">{`serviceid`}</inlineCode>{`. Don’t be alarmed, it still works.`}</p>\n    <p>{`Do NOT select Administrator. One should follow the least-privelege principal for the FHIRSERVER user.`}</p>\n    <p>{`Click Create.`}</p>\n    <p>{`You should now be able to connect to the database as the FHIRSERVER user using only the API key created above.`}</p>\n    <h3 {...{\n      \"id\": \"testing-the-connection\"\n    }}>{`Testing the Connection`}</h3>\n    <p>{`The Db2 driver jar contains a main which can be executed to test the connection - very convenient for checking the API-key/Service-Id/Db2-User-Id configuration is correct.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-bash\"\n      }}>{`java -cp /path/to/db2jcc4.jar com.ibm.db2.jcc.DB2Jcc  -url \"jdbc:db2://<DB2-HOSTNAME>:50001/BLUDB:apiKey=<API-KEY>;securityMechanism=15;sslConnection=true;sslTrustStoreLocation=/path/to/truststore.jks;sslTrustStorePassword=<TRUSTSTORE-PASSWORD>;\"\n`}</code></pre>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<DB-HOSTNAME>`}</inlineCode>{`: the hostname of your Db2 service from the Service Credentials page`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<API-KEY>`}</inlineCode>{`: the API key value created in the previous section`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`<TRUSTSTORE-PASSWORD>`}</inlineCode>{`: the password for your truststore`}</li>\n    </ul>\n    <p>{`Notes:\n1. Don’t forget the trailing `}<inlineCode parentName=\"p\">{`;`}</inlineCode>{` in the URL. Some of the documented examples don’t include it, but it is required in order for the connection to work, although this may be fixed in a future driver release. This only affects this test URL, not the actual FHIR server configuration.\n2. When using an API Key, no username needs to be provided. This is because the API Key maps to a ServiceId, and that ServiceId is mapped to the Db2 user.`}</p>\n    <h3 {...{\n      \"id\": \"configuring-a-liberty-datasource-with-api-key\"\n    }}>{`Configuring a Liberty Datasource with API Key`}</h3>\n    <p>{`The IBM FHIR Server Import/Export feature utilizes Java Batch (JSR-352) provided by the batch-1.0 feature in Liberty Profile. The persistence layer can be configured to use Db2 as follows:`}</p>\n    <p>{`Create a Db2 user (e.g. FHIRBATCH) and associate it with a ServiceId (no need to create an Administration user, a simple user has sufficient privileges). Using a valid API-KEY for the given ServiceId, configure a new datasource and the Java Batch persistence layer as follows:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-xml\"\n      }}>{`    <dataSource id=\"fhirbatchDS\" jndiName=\"jdbc/fhirbatchDB\">\n        <jdbcDriver libraryRef=\"fhirSharedLib\"/>\n        <properties.db2.jcc\n            serverName=\"dashdb-txn-flex-************.services.dal.bluemix.net\"\n            portNumber=\"50001\"\n            apiKey=\"<API-KEY>\"\n            securityMechanism=\"15\"\n            pluginName=\"IBMIAMauth\"\n            databaseName=\"BLUDB\"\n            currentSchema=\"JBATCH\"\n            driverType=\"4\" sslConnection=\"true\" sslTrustStoreLocation=\"resources/security/dbTruststore.jks\" sslTrustStorePassword=\"<TRUSTSTORE-PASSWORD>\"/>\n    </dataSource>\n\n    <batchPersistence jobStoreRef=\"BatchDatabaseStore\" />\n    <databaseStore id=\"BatchDatabaseStore\" dataSourceRef=\"fhirbatchDS\" schema=\"JBATCH\" tablePrefix=\"\" />\n`}</code></pre>\n    <p>{`Note, the Java Batch is configured in batchDs.xml  and included from the default server.xml that gets installed to the `}<inlineCode parentName=\"p\">{`{wlp}/usr/server/fhir-server`}</inlineCode>{`.`}</p>\n    <h3 {...{\n      \"id\": \"configuring-fhir-datasource\"\n    }}>{`Configuring FHIR Datasource`}</h3>\n    <p>{`The FHIR server uses a proxy datasource mechanism, allowing new datasources to be added at runtime without requiring a (Liberty Profile) server restart. To configure a FHIR tenant datasource using an API-KEY, use the following template:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-json\"\n      }}>{`        \"persistence\": {\n            \"datasources\": {\n                \"default\": {\n                    \"tenantKey\": \"\",\n                    \"type\": \"db2\",\n                    \"connectionProperties\": {\n                        \"serverName\": \"dashdb-txn-flex-************.services.dal.bluemix.net\",\n                        \"portNumber\": 50001,\n                        \"databaseName\": \"BLUDB\",\n                        \"apiKey\": \"<API-KEY>\",\n                        \"securityMechanism\": 15,\n                        \"pluginName\": \"IBMIAMauth\",\n                        \"currentSchema\": \"FHIRDATA\",\n                        \"driverType\": 4,\n                        \"sslConnection\": true,\n                        \"sslTrustStoreLocation\": \"resources/security/dbTruststore.jks\",\n                        \"sslTrustStorePassword\": \"change-password\"\n                    }\n                }\n            }\n        }\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"mapping-from-ibm-db2-on-cloud-endpoint-credentials\"\n    }}>{`Mapping from IBM Db2 on Cloud Endpoint Credentials`}</h4>\n    <p>{`This section explains how to populate the FHIR datasource from IBM Db2 on Cloud configuration details from an example configuration: `}</p>\n    <p>{`Use the following table to populate your datasource. `}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`IBM FHIR Server Configuration`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`serverName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the credential object select `}<inlineCode parentName=\"td\">{`hostname`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`portNumber`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the credential object select  `}<inlineCode parentName=\"td\">{`port`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`databaseName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the credential object select  `}<inlineCode parentName=\"td\">{`db`}</inlineCode>{`, generally always `}<inlineCode parentName=\"td\">{`BLUDB`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`apiKey`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`from the created user in the assigned to the `}<inlineCode parentName=\"td\">{`fhiruser`}</inlineCode>{` group. Reference Section `}<strong parentName=\"td\">{`FHIRSERVER User and API Key`}</strong></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`securityMechanism`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`15`}</inlineCode>{` generally set to 15 to trigger the `}<inlineCode parentName=\"td\">{`apiKey`}</inlineCode>{` use with IBM Cloud`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`pluginName`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`IBMIAMauth`}</inlineCode>{` fixed for use with the IBM Cloud`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`currentSchema`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`the schema name of your deployed tenant Schema, for instance `}<inlineCode parentName=\"td\">{`FHIRDATA`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`driverType`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`4`}</inlineCode>{`, always JDBC Type-4`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sslConnection`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`true`}</inlineCode>{`, if you are using IBM Cloud`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sslTrustStoreLocation`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Local server path to the truststore, `}<inlineCode parentName=\"td\">{`resources/security/dbTruststore.jks`}</inlineCode></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`sslTrustStorePassword`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`The password to the truststore`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <ul>\n      <li parentName=\"ul\">{`Reference the section `}<strong parentName=\"li\">{`Create the Administrator Credential`}</strong>{` to see an example. `}</li>\n    </ul>\n    <p>{`Note, no username properties are given, because the authentication module only requires the API-KEY.`}</p>\n    <h3 {...{\n      \"id\": \"ssl-certificate\"\n    }}>{`SSL Certificate`}</h3>\n    <p>{`The Db2 certificate should be added to the Liberty Profile truststore. `}<em parentName=\"p\">{`Be sure to use the same Java runtime that Liberty Profile uses when manipulating any keystores.`}</em></p>\n    <h3 {...{\n      \"id\": \"encrypt-secrets\"\n    }}>{`Encrypt Secrets`}</h3>\n    <p>{`All passwords including apiKey values should be encrypted using the Liberty Profile securityUtility.`}</p>\n    <h1 {...{\n      \"id\": \"references\"\n    }}>{`References`}</h1>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://cloud.ibm.com/docs/services/Db2onCloud?topic=Db2onCloud-db_details_cxn_creds\"\n        }}>{`Db2 on Cloud: Database details and connection credentials`}</a></li>\n    </ul>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}